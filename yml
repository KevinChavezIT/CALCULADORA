perfecto ya funciona correctamente este seria el playbook completo 

---
- name: Descargar archivo .nmon desde VIOS
  hosts: vios_testt
  gather_facts: false

  vars:
    remote_source_dir: "/home/NMON"

  tasks:

  pre_tasks:
    - name: Log start of playbook execution
      ansible.builtin.include_role:
        name: pichincha.sre.pre_task

    - name: Crear directorio
      ansible.builtin.file:
        path: "/tmp/nmon_{{ inventory_hostname }}/"
        state: directory
        mode: "0755"
      delegate_to: localhost
      become: false

    - name: Encontrar el Ãºltimo .nmon en el VIOS (ordenado por fecha)
      ansible.builtin.raw: "ls -1t /home/NMON/*.nmon 2>/dev/null | head -1"
      register: ultimo_nmon
      changed_when: false

    - name: Normalizar ruta del archivo encontrado
      ansible.builtin.set_fact:
        nmon_file: "{{ (ultimo_nmon.stdout | default('')) | regex_replace('\r', '') | trim }}"
      changed_when: false

    - name: Mostrar archivo normalizado
      ansible.builtin.debug:
        msg: "Ruta normalizada: '{{ nmon_file if nmon_file|length > 0 else 'Ninguno' }}'"

    - name: Validar existencia del archivo en el remoto
      ansible.builtin.stat:
        path: "{{ nmon_file }}"
      register: nmon_stat
      when: nmon_file | length > 0

    - name: Descargar el archivo .nmon al controlador
      ansible.builtin.fetch:
        src: "{{ nmon_file }}"
        dest: "/tmp/nmon_{{ inventory_hostname }}/"
        flat: true
      when: nmon_file | length > 0 and nmon_stat.stat.exists and nmon_stat.stat.isreg

    - name: Mostrar resultado local
      ansible.builtin.shell: |
        echo "=== Resultado ==="
        echo "Servidor: {{ inventory_hostname }}"
        echo "Directorio: /tmp/nmon_{{ inventory_hostname }}/"
        echo "Archivos:"
        ls -lh "/tmp/nmon_{{ inventory_hostname }}/" 2>/dev/null || echo "No se extrajeron archivos"
      delegate_to: localhost
      become: false
      changed_when: false

  post_tasks:
    - name: Log end of playbook execution
      ansible.builtin.include_role:
        name: pichincha.sre.post_task
